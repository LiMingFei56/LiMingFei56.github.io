---
layout: post
title: ios pay
categories: ios
tags: [ios]
date: 2024-03-18
---

## ios pay

背景：

苹果规定「虚拟数字产品」必须使用苹果IPA(内购)来完成支付，并且苹果会抽取30%的费用。因此如何绕开这 30% 的抽水，是很多开发者都关心的问题，也是我们公司要解决的问题。

看用户付费购买的商品/服务是否为「虚拟数字产品」。更详细地说，看商品/服务的实际消费场景是在 app 内，还是 app 之外。

在 app 内即可完成消费的，苹果要求使用 IAP。典型如电子书、在线音乐、充值类虚拟货币、游戏/直播中道具、QQ/微博等会员类产品、在视频 app 中看电影、微信表情等。

需要在 app 之外完成消费的，可以使用第三方支付。典型如线下电影票、实物电商、在行、滴滴出行/Uber 等。

解决办法：

1、现在苹果上架较为严格，如果接入sdk的话，苹果可能会检测出第三方支付代码，上架的风险较大，所以作为替代方案，可以用我们公司的wap支付

2、需要做两套支付系统，一套是苹果内购，一套是走我们公司的wap通道（即微信支付宝等第三方支付方式），可以在你们的服务器上做个接口，返回0或者1，来控制是用苹果内购还是用我们公司的支付系统。

3、在审核的时候切到苹果内购支付方式，审核完毕切换到我们的支付系统，这样可以躲过苹果的审查。

4、itunes connection中需要操作进行一些账号和银行卡等的设置，这些需要你们自己进行，可以参考文章：http://www.jianshu.com/p/adaf472ed3ab?open_source=weibo_search。

## Reference
