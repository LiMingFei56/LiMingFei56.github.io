## 空安全

### 可空类型与不可空类型
旨在消除空引用的风险,也叫做10亿美元的错误.

在Kotlin中可以出现NPE的情况:
	
	- 显式的调用`throw NullPointerException()`
	- 使用!!操作符
	- 外部JAVA代码造成的
	- 关于初始化的一些数据不一致

Kotlin区分引用为可空引用和不可空引用:

	var a: String = "abc" 不可空引用
	var b: String? = null 可空引用

访问a是安全的,访问b是不安全的,所以有方法来保存访问b的安全.

### 使用空引用

#### 1. 条件判断是否为空
	val l = if (b != null) b.length else -1

#### 2. 安全调用
如果对象有可能是空,可以使用安全调用"?.",如b?.length.如果b不为空,那么返回
b.length,否则就返回null.

安全调用可以组合成调用链

如果只对非空对象进行操作,可以使用let操作符:

	val listWithNulls: List<String?> = listOf("A", null)
	for (item in listWithNulls) {
	     item?.let { println(it) } // prints A and ignores null
	}

#### 3. Elvis Operator
一种情况,如果a不为空就用a,否则用b:

	val l: Int = if (b != null) b.length else -1

也可以使用简单的语法 "?:"

	val l = b?.length ?: -1

因为`return`和`throw`是表达式,也可以在Elvis Operator中使用

#### 4. !!操作符
b!!.length 将返回一个非空值b,如果b为空会抛出NPE

#### 5. 安全转换
使用as?来安全转换,如果失败返回null.

#### 6. 集合可空类型
如果集合类型可空,那么可以使用函数过滤掉空的

	val nullableList: List<Int?> = listOf(1, 2, null, 4)
	val intList: List<Int> = nullableList.filterNotNull()
